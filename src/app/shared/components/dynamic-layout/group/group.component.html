<ng-container [ngSwitch]="group.groupType">

  <!-- Tabs Group -->
  <div *ngSwitchCase="'tabs'">
    <app-tabview>
      <app-tabview-tab *ngFor="let item of group.children; let i = index;" [title]="item.label || 'Tab ' + (i + 1)">
        <ng-container *ngTemplateOutlet="content; context: { $implicit: item }"></ng-container>
      </app-tabview-tab>
    </app-tabview>
  </div>

  <!-- Horizontal Group with Splitters -->
  <app-area *ngSwitchCase="'horizontal'" layout="row">
    <app-area *ngFor="let item of group.children" [initialSize]="item.size">
      <ng-container *ngTemplateOutlet="content; context: { $implicit: item }"></ng-container>
    </app-area>
  </app-area>

  <!-- Vertical Group with Splitters -->
  <app-area *ngSwitchCase="'vertical'" layout="column">
    <app-area *ngFor="let item of group.children" [initialSize]="item.size">
      <ng-container *ngTemplateOutlet="content; context: { $implicit: item }"></ng-container>
    </app-area>
  </app-area>

  <!-- Root Group -->
  <div *ngSwitchCase="'root'" class="full-size">
    <div *ngFor="let item of group.children" class="full-size">
      <ng-container *ngTemplateOutlet="content; context: { $implicit: item }"></ng-container>
    </div>
  </div>

  <!-- Plain Group -->
  <div *ngSwitchDefault class="full-size">
    <div *ngFor="let item of group.children">
      <ng-container *ngTemplateOutlet="content; context: { $implicit: item }"></ng-container>
    </div>
  </div>
</ng-container>

<ng-template #content let-item>
  <ng-container *ngIf="isDisplayed(item) | async">
    <ng-container [ngSwitch]="item.type">

      <!-- Attribute -->
      <div *ngSwitchCase="'attribute'" class="mb" style="width: 100%">
        <app-dynamic-layout-attribute [attribute]="item"></app-dynamic-layout-attribute>
      </div>

      <!-- Control -->
      <div *ngSwitchCase="'control'" class="mb" style="width: 100%">
        <app-dynamic-layout-control [control]="item"></app-dynamic-layout-control>
      </div>

      <!-- Group -->
      <app-dynamic-layout-group
        *ngSwitchCase="'group'"
        [group]="item"
      ></app-dynamic-layout-group>

      <!-- Template -->
      <app-dynamic-layout-template
        *ngSwitchCase="'template'"
        [template]="item"
      ></app-dynamic-layout-template>
    </ng-container>
  </ng-container>
</ng-template>
