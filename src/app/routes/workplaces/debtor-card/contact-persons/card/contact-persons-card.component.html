<div class="flex vertical">

  <!-- Form -->
  <div class="flex-item">
      <div class="pb-lg">
        <button class="btn btn-default" (click)="onBack()">
          <i class="fa fa-arrow-left"></i> {{ 'default.buttons.back' | translate }}
        </button>
        <button class="btn btn-success" (click)="onSubmit()" [disabled]="!canSubmit">
          <i class="fa fa-check"></i> {{ 'default.buttons.save' | translate }}
        </button>
      </div>
      <app-dynamic-form *ngIf="controls" [controls]="controls" [data]="contact"></app-dynamic-form>
  </div>
  <!-- Person grid -->
  <div class="flex-item grow" *ngIf="contact === null">
      <app-person-select-grid  (select)="onContactSelected($event)"></app-person-select-grid>
  </div>
  <!-- Person card -->
  <div class="flex-item" *ngIf="contact">
      <app-person-select-card  [personId]="contact.id"></app-person-select-card>
  </div>
  <!-- Details Tabstrip -->
  <div class="flex-item grow">
    <app-tabview [fullHeight]="true" [noMargin]="true" (select)="onTabSelect($event)">

      <!-- Phones -->
      <app-tabview-tab [title]="tabs[0].title" >
        <app-phone-grid
          *ngIf="tabs[0].isInitialised"
          action="edit"
          [contactType]="1"
          [debtId]="debtId"
          [personId]="contactId"
          [personRole]="4"
          (add)="onPhoneAdd()"
          (dblClick)="onPhoneEdit($event)"
          (edit)="onPhoneEdit($event)"
        ></app-phone-grid>
      </app-tabview-tab>

      <!-- Addresses -->
      <app-tabview-tab [title]="tabs[1].title" >
        <app-address-grid
          *ngIf="tabs[1].isInitialised"
          action="edit"
          [debtId]="debtId"
          [debtorId]="debtorId"
          [personId]="contactId"
          [personRole]="4"
          (add)="onAddressAdd()"
          (dblClick)="onAddressEdit($event)"
          (edit)="onAddressEdit($event)"
        ></app-address-grid>
      </app-tabview-tab>

      <!-- Identity Documents -->
      <app-tabview-tab [title]="tabs[2].title" >
        <app-identity-grid
          *ngIf="tabs[2].isInitialised"
          [personId]="contactId"
          (add)="onIdentityAdd()"
          (dblClick)="onIdentityEdit($event)"
          (edit)="onIdentityEdit($event)"
        ></app-identity-grid>
      </app-tabview-tab>

      <!-- Employment History -->
      <app-tabview-tab [title]="tabs[3].title" >
        <app-employment-grid
          *ngIf="tabs[3].isInitialised"
          [personId]="contactId"
          (add)="onEmploymentAdd()"
          (dblClick)="onEmploymentEdit($event)"
          (edit)="onEmploymentEdit($event)"
        ></app-employment-grid>
      </app-tabview-tab>
    </app-tabview>
  </div>
</div>
