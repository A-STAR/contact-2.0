<div class="flex vertical">
  <div class="flex-item">
    <app-button type="back" (click)="onBack()"></app-button>
    <app-button type="save" [disabled]="isSubmitDisabled$ | async" (click)="onSave()"></app-button>
  </div>
  <div class="flex-item grow mb-lg">
    <app-dynamic-layout
      [layout]="layoutConfig"
      [data]="formData$ | async"
      [templates]="templates"
    ></app-dynamic-layout>
  </div>
</div>

<ng-template #personTitlebar>
  <app-titlebar [titlebar]="contactPersonTitlebar"></app-titlebar>
</ng-template>

<ng-template #personClearButton>
  <app-button *ngIf="!(edit$ | async)" type="clear" (click)="onContactPersonFormClear()"></app-button>
</ng-template>

<ng-template #identification>
  <app-identity-grid
    [personId]="personId"
    (add)="onIdentityAdd()"
    (dblClick)="onIdentityEdit($event)"
    (edit)="onIdentityEdit($event)"
  ></app-identity-grid>
</ng-template>

<ng-template #employment>
  <app-employment-grid
    [personId]="personId"
    (add)="onEmploymentAdd()"
    (dblClick)="onEmploymentEdit($event)"
    (edit)="onEmploymentEdit($event)"
  ></app-employment-grid>
</ng-template>

<ng-template #phones>
  <app-phone-grid
    [contactType]="phoneContactType"
    [debtId]="debtId"
    [personId]="personId"
    [personRole]="contactPersonRole"
    (add)="onPhoneAdd()"
    (dblClick)="onPhoneRegister($event)"
    (edit)="onPhoneEdit($event)"
    (register)="onPhoneRegister($event)"
  ></app-phone-grid>
</ng-template>

<ng-template #addresses>
  <app-address-grid
    [debtId]="debtId"
    [personId]="personId"
    [personRole]="contactPersonRole"
    (add)="onAddressAdd()"
    (dblClick)="onAddressRegister($event)"
    (edit)="onAddressEdit($event)"
    (register)="onAddressRegister($event)"
  ></app-address-grid>
</ng-template>

<ng-template #documents>
  <!-- Documents for debt (term 19 in dictionary 55) -->
  <app-document-grid
    [entityType]="19"
    [entityId]="debtId"
  ></app-document-grid>
</ng-template>
