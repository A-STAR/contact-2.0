<div class="flex vertical">
  <div class="flex-item">
    <app-button type="back" (click)="onBack()"></app-button>
  </div>
  <div class="flex-item grow mb-lg">
    <!-- <app-metadata-form
      #linkForm
      [config]="linkFormConfig"
      [data]="contactPerson$ | async"
    ></app-metadata-form>
    <app-metadata-form
      #contactPersonForm
      [config]="contactPersonFormConfig"
      [data]="contactPerson$ | async"
      [disabled]="isContactPersonFormDisabled$ | async"
    ></app-metadata-form> -->
    <app-dynamic-layout
      [layout]="layoutConfig"
      [data]="formData$ | async"
      [templates]="templates"
    ></app-dynamic-layout>
  </div>
  <div class="flex-item">
    <app-button type="save" [disabled]="!canSubmit" (click)="onSave()"></app-button>
  </div>
</div>

<ng-template #personTitlebar>
  <app-titlebar [titlebar]="contactPersonTitlebar"></app-titlebar>
</ng-template>

<ng-template #personClearButton>
  <app-button *ngIf="!(edit$ | async)" type="clear" (click)="onContactPersonFormClear()"></app-button>
</ng-template>

<ng-template #identification>
  <app-identity-grid
    [personId]="contactId"
    (add)="onIdentityAdd()"
    (dblClick)="onIdentityEdit($event)"
    (edit)="onIdentityEdit($event)"
  ></app-identity-grid>
</ng-template>

<ng-template #employment>
  <app-employment-grid
    [personId]="contactId"
    (add)="onEmploymentAdd()"
    (dblClick)="onEmploymentEdit($event)"
    (edit)="onEmploymentEdit($event)"
  ></app-employment-grid>
</ng-template>

<ng-template #phones>
  <app-phone-grid
    [contactType]="1"
    [debtId]="debtId"
    [personId]="contactId"
    [personRole]="contactPersonRole"
    (add)="onPhoneAdd()"
    (dblClick)="onPhoneEdit($event)"
    (edit)="onPhoneEdit($event)"
  ></app-phone-grid>
</ng-template>

<ng-template #addresses>
  <app-address-grid
    [debtId]="debtId"
    [personId]="contactId"
    [personRole]="contactPersonRole"
    (add)="onAddressAdd()"
    (dblClick)="onAddressEdit($event)"
    (edit)="onAddressEdit($event)"
  ></app-address-grid>
</ng-template>

<ng-template #documents>
  <!-- Documents for debt (term 19 in dictionary 55) -->
  <app-document-grid
    [entityType]="19"
    [entityId]="debtId"
  ></app-document-grid>
</ng-template>
