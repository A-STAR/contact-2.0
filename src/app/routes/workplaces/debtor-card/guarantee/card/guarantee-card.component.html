<div class="flex vertical">
  <div class="flex-item">
    <app-button type="back" (click)="onBack()"></app-button>
    <app-button type="save" [disabled]="isSubmitDisabled$ | async" (click)="onSave()"></app-button>
  </div>
  <div class="flex-item grow mb-lg">
    <app-dynamic-layout
      [layout]="layoutConfig"
      [data]="formData$ | async"
      [templates]="templates"
    ></app-dynamic-layout>
  </div>
</div>

<ng-template #identification>
  <app-identity-grid
    [personId]="guarantorId"
    (add)="onIdentityAdd()"
    (dblClick)="onIdentityEdit($event)"
    (edit)="onIdentityEdit($event)"
  ></app-identity-grid>
</ng-template>

<ng-template #employment>
  <app-employment-grid
    [personId]="guarantorId"
    (add)="onEmploymentAdd()"
    (dblClick)="onEmploymentEdit($event)"
    (edit)="onEmploymentEdit($event)"
  ></app-employment-grid>
</ng-template>

<ng-template #phones>
  <app-phone-grid
    [contactType]="1"
    [debtId]="debtId"
    [personId]="guarantorId"
    [personRole]="guarantorRole"
    (add)="onPhoneAdd()"
    (edit)="onPhoneEdit($event)"
    (register)="onPhoneRegister($event)"
  ></app-phone-grid>
</ng-template>

<ng-template #addresses>
  <app-address-grid
    [debtId]="debtId"
    [debtorId]="debtorId"
    [personId]="guarantorId"
    [personRole]="guarantorRole"
    (add)="onAddressAdd()"
    (edit)="onAddressEdit($event)"
    (register)="onAddressRegister($event)"
  ></app-address-grid>
</ng-template>

<ng-template #emails>
  <app-email-grid
    [entityId]="guarantorId"
    [personRole]="guarantorRole"
  ></app-email-grid>
</ng-template>

<ng-template #documents>
  <app-document-grid
    [addForEntity]="[18, 32]"
    [contractId]="contractId"
    [debtId]="debtId"
    [entityType]="entityType"
    [entityId]="guarantorId"
    [personId]="guarantorId"
  ></app-document-grid>
</ng-template>

<ng-template #contractToolbar>
  <app-toolbar [toolbar]="contractToolbarConfig"></app-toolbar>
</ng-template>

<ng-template #personToolbar>
  <app-toolbar [toolbar]="personToolbarConfig"></app-toolbar>
</ng-template>

<ng-template #contractClearButton>
  <app-button *ngIf="!(edit$ | async)" type="clear" (click)="onContractFormClear()"></app-button>
</ng-template>

<ng-template #personClearButton>
  <app-button *ngIf="!(edit$ | async)" type="clear" (click)="onPersonFormClear()"></app-button>
</ng-template>
